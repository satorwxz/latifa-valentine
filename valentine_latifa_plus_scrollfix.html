<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–õ–∞—Ç–∏—Ñ–∞, –±—É–¥–µ—à—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíñ</title>
  <meta name="theme-color" content="#ff2d6f" />

  <!-- Pretty fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#ff3b6b;
      --bg2:#b31237;
      --pink:#ff2d6f;
      --pink2:#ff7aa9;
      --card: rgba(255,255,255,.90);
      --muted:#5a5a5a;
      --shadow: 0 20px 70px rgba(0,0,0,.25);
      --radius: 28px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#1b1b1b;
      overflow-x:hidden;
      overflow-y:auto;
      background:
        radial-gradient(1200px 900px at 20% 10%, rgba(255,255,255,.22), transparent 60%),
        radial-gradient(900px 700px at 80% 30%, rgba(255,255,255,.14), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    /* floating hearts */
    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden}
    .heart{
      position:absolute;
      width:14px; height:14px;
      transform: rotate(45deg);
      background: rgba(255,255,255,.92);
      opacity:.86;
      animation: fall linear forwards;
      border-radius:3px;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.12));
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:14px; height:14px;
      background: inherit;
      border-radius:50%;
    }
    .heart::before{ left:-7px; top:0; }
    .heart::after{ left:0; top:-7px; }
    @keyframes fall{
      from { transform: translateY(-10vh) rotate(45deg); }
      to   { transform: translateY(115vh) rotate(45deg); }
    }

    /* background sparkles */
    .sparkles{position:fixed; inset:0; pointer-events:none; opacity:.55; mix-blend-mode: screen;}
    .spark{
      position:absolute;
      width:6px;height:6px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.05));
      animation: twinkle ease-in-out infinite;
    }
    @keyframes twinkle{
      0%,100%{ transform: scale(.6); opacity:.35; }
      50%{ transform: scale(1.5); opacity:.9; }
    }

    .wrap{
      width:min(960px, 100%);
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
      align-items:stretch;
    }

    .card{
      border-radius: var(--radius);
      background: var(--card);
      border: 1px solid rgba(255,255,255,.75);
      box-shadow: var(--shadow);
      overflow-x:hidden;
      overflow-y:auto;
      position:relative;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 16px;
      background: linear-gradient(135deg, rgba(255,45,111,.18), rgba(255,255,255,.35));
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:1000;
      color:#b31237;
      letter-spacing:.2px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.7);
      border:1px solid rgba(179,18,55,.16);
      color:#b31237;
      font-weight:1000;
      font-size:12px;
      user-select:none;
    }

    .stage{
      padding:18px 16px 18px;
      min-height: 590px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      background:
        radial-gradient(700px 500px at 25% 25%, rgba(255,255,255,.22), transparent 60%),
        radial-gradient(680px 420px at 80% 55%, rgba(255,255,255,.12), transparent 60%);
    }

    .slide{
      position:absolute;
      width:min(660px, 100%);
      border-radius: 26px;
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(255,255,255,.75);
      box-shadow: 0 18px 60px rgba(0,0,0,.18);
      padding: 22px 18px 18px;
      text-align:center;
      opacity:1;
      transform: translateY(0) scale(1);
      transition: opacity .55s ease, transform .55s ease;
    }
    .slide.hidden{ opacity:0; transform: translateY(18px) scale(.985); pointer-events:none; }
    .pop{ animation: pop .55s ease; }
    @keyframes pop{
      from{ transform: translateY(18px) scale(.985); opacity:0; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    .kicker{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 12px;
      border-radius:999px;
      background: linear-gradient(135deg, rgba(255,45,111,.18), rgba(255,255,255,.65));
      border:1px solid rgba(255,45,111,.18);
      color:#b31237;
      font-weight:1000;
      letter-spacing:.2px;
      font-size:12px;
      margin-bottom:10px;
    }

    h1{
      font-family: "Pacifico", cursive;
      font-weight:400;
      margin: 6px 0 10px;
      font-size: 34px;
      line-height:1.12;
      color:#b31237;
    }

    .sub{
      margin: 0 auto 14px;
      color: var(--muted);
      font-size: 15.5px;
      line-height: 1.55;
      max-width: 62ch;
      font-weight:900;
    }

    .btns{
      position:relative;
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      margin-top: 10px;
      padding-bottom: 6px;
      min-height: 56px; /* for moving button */
    }

    button{
      border:0;
      border-radius:999px;
      padding:12px 18px;
      font-weight:1000;
      cursor:pointer;
      transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
      box-shadow: 0 12px 24px rgba(255,45,111,.20);
      font-size:14px;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .primary{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
    }

    .trickWrap{
      position:relative;
      display:inline-block;
      height: 46px;
      min-width: 140px;
    }
    .trick{
      position:absolute;
      left:0; top:0;
      background: rgba(255,255,255,.92);
      color:#b31237;
      box-shadow: 0 12px 18px rgba(0,0,0,.10);
      border: 1px solid rgba(179,18,55,.12);
      width:100%;
    }

    .toast{
      position:absolute;
      left:50%;
      transform: translateX(-50%);
      bottom: 18px;
      background: rgba(0,0,0,.72);
      color:#fff;
      padding:10px 12px;
      border-radius:14px;
      font-weight:900;
      font-size:13px;
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-6px);
    }

    /* polaroid photo */
    .polaroid{
      width:min(380px, 100%);
      margin: 12px auto 6px;
      background: #fff;
      border-radius: 18px;
      padding: 12px 12px 18px;
      box-shadow: 0 18px 50px rgba(0,0,0,.18);
      transform: rotate(-1.2deg);
    }
    .polaroid img{
      width:100%;
      height:auto;
      border-radius: 14px;
      display:block;
      filter: contrast(1.03) saturate(1.05);
    }
    .caption{
      margin-top:10px;
      font-weight:1000;
      color:#b31237;
      font-size:13px;
      letter-spacing:.2px;
    }

    /* cute sticker corner */
    .stickerCorner{
      position:absolute;
      width:86px; height:86px;
      right:14px; top:68px;
      border-radius:26px;
      background: rgba(255,255,255,.65);
      border:1px dashed rgba(179,18,55,.22);
      display:grid;
      place-items:center;
      box-shadow: 0 16px 30px rgba(0,0,0,.12);
      transform: rotate(6deg);
      animation: floaty 3.8s ease-in-out infinite;
    }
    @keyframes floaty{
      0%,100%{ transform: translateY(0) rotate(6deg); }
      50%{ transform: translateY(-8px) rotate(-4deg); }
    }

    /* "postcard" blocks inside slides */
    .postcards{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin: 10px auto 12px;
      max-width: 560px;
    }
    @media (max-width:520px){ .postcards{ grid-template-columns:1fr; } }
    .pc{
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(179,18,55,.12);
      border-radius: 18px;
      padding: 12px 12px;
      box-shadow: 0 14px 30px rgba(0,0,0,.10);
      text-align:left;
    }
    .pcTitle{
      font-weight:1000;
      color:#b31237;
      margin:0 0 6px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .pcText{
      margin:0;
      color:#3a3a3a;
      font-weight:900;
      line-height:1.45;
      font-size:14px;
    }

    .divider{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(179,18,55,.28), transparent);
      margin: 12px auto;
      width: min(520px, 100%);
    }

    .small{
      font-size:13px;
      font-weight:900;
      color: var(--muted);
      margin-top: 10px;
    }

    @media (max-width:480px){
      h1{ font-size: 30px; }
      .stage{ min-height: 630px; }
    }
  
    @media (max-width:520px){
      .stage{ align-items:flex-start; }
    }

</style>
</head>

<body>
  <div class="hearts" id="hearts"></div>
  <div class="sparkles" id="sparkles"></div>

  <main class="wrap">
    <section class="card">
      <div class="top">
        <div class="brand">üíå Love Card</div>
        <div class="pill"></div>
      </div>

      <div class="stickerCorner" aria-hidden="true">
        <!-- cute bunny SVG -->
        <svg width="60" height="60" viewBox="0 0 128 128">
          <circle cx="64" cy="72" r="34" fill="#fff"/>
          <ellipse cx="44" cy="34" rx="12" ry="22" fill="#fff"/>
          <ellipse cx="84" cy="34" rx="12" ry="22" fill="#fff"/>
          <ellipse cx="44" cy="34" rx="7" ry="14" fill="#ffd6e6"/>
          <ellipse cx="84" cy="34" rx="7" ry="14" fill="#ffd6e6"/>
          <circle cx="52" cy="70" r="5" fill="#222"/>
          <circle cx="76" cy="70" r="5" fill="#222"/>
          <path d="M64 76c-5 0-9 3-9 6s4 6 9 6 9-3 9-6-4-6-9-6Z" fill="#ffd6e6"/>
          <path d="M48 86c6 6 14 8 16 8" stroke="#ff8bb6" stroke-width="4" fill="none" stroke-linecap="round"/>
          <path d="M80 86c-6 6-14 8-16 8" stroke="#ff8bb6" stroke-width="4" fill="none" stroke-linecap="round"/>
          <path d="M42 60c-10 4-12 14-8 22" stroke="#ff2d6f" stroke-width="4" fill="none" stroke-linecap="round" opacity=".65"/>
          <path d="M86 60c10 4 12 14 8 22" stroke="#ff2d6f" stroke-width="4" fill="none" stroke-linecap="round" opacity=".65"/>
        </svg>
      </div>

      <div class="stage" id="stage">

        <!-- Slide 1 -->
        <section class="slide" id="s1">
          <div class="kicker">üíó –õ—é–±–ª—é —Ç–µ–±—è,–ª—é–±–∏–º–∞—è</div>
          <h1 id="title1">–õ–∞—Ç–∏—Ñ–∞, –±—É–¥–µ—à—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</h1>
          <p class="sub" id="text1">
            –Ø –¥–æ–ª–≥–æ –¥—É–º–∞–ª, –∫–∞–∫ —Å–∫–∞–∑–∞—Ç—å —ç—Ç–æ –∫—Ä–∞—Å–∏–≤–æ –∏ –ø–æ–Ω—è–ª, —á—Ç–æ —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ —É–∂–µ –µ—Å—Ç—å‚Ä¶ —ç—Ç–æ —Ç—ã.
            –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ—Ç –¥–µ–Ω—å –Ω–∞—à–∏–º –º–∞–ª–µ–Ω—å–∫–∏–º –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º ü•∞
          </p>

          <div class="btns" id="btnArea">
            <button class="primary" onclick="goYes()">–î–∞ üíñ</button>

            <span class="trickWrap" id="trickWrap">
              <button class="trick" id="noBtn" onclick="noClick()">–ù–µ—Ç‚Ä¶</button>
            </span>
          </div>

          <div class="toast" id="toast">–ü–æ–¥—É–º–∞–π –µ—â—ë —Ä–∞–∑ üòè</div>
        </section>

        <!-- Slide 2 -->
        <section class="slide hidden" id="s2">
          <div class="kicker">üéâ –£—Ä–∞–∞–∞!</div>
          <h1>–¢—ã –≤—ã–±—Ä–∞–ª–∞ ‚Äú–î–∞‚Äù üòç</h1>
          <p class="sub">
            –Ø —É–ª—ã–±–∞—é—Å—å –∫–∞–∫ –±—É–¥—Ç–æ –≤–ø–µ—Ä–≤—ã–µ —É–≤–∏–¥–µ–ª —Ç–µ–±—è üíó
            –¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π —Å–ª–µ–¥—É—é—â—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É. –¢–∞–º —Å–∞–º–æ–µ —Ç—ë–ø–ª–æ–µ.
          </p>

          <div class="postcards">
            <div class="pc">
              <p class="pcTitle">üå∏ –¢—ã ‚Äî</p>
              <p class="pcText">–º–æ–π —É—é—Ç, –º–æ—ë —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –º–æ–π –ª—É—á—à–∏–π –¥–µ–Ω—å.</p>
            </div>
            <div class="pc">
              <p class="pcTitle">‚ú® –Ø —Ö–æ—á—É </p>
              <p class="pcText">–¥–µ–ª–∞—Ç—å —Ç–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤–µ–µ –Ω–µ —Å–ª–æ–≤–∞–º–∏, –∞ –ø–æ—Å—Ç—É–ø–∫–∞–º–∏.</p>
            </div>
          </div>

          <div class="btns">
            <button class="primary" onclick="goPhoto()">–õ—é–±–∏–º–∞—è,–Ω–∞–∂–∏–º–∞–π üíå</button>
          </div>
        </section>

        <!-- Slide 3 (photo) -->
        <section class="slide hidden" id="s3">
          

          <div class="polaroid">
            <img src="latifa_photo_clean.jpg" alt="–ù–∞—à–µ —Ñ–æ—Ç–æ" />
            <div class="caption">–õ–∞—Ç–∏—Ñ–∞ √ó –ë–µ–∫—Ç—É—Ä ‚Ä¢ 14.02</div>
          </div>
<div class="kicker">üì∏ –ù–∞—à–∞ –æ—Ç–∫—Ä—ã—Ç–∫–∞</div>
          <h1>–≠—Ç–æ –º—ã üíó</h1>
          <p class="sub" style="max-width:62ch">
            –Ø –ª—é–±–ª—é –º–æ–º–µ–Ω—Ç—ã —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π, –¥–∞–∂–µ —Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ.
            –° —Ç–æ–±–æ–π –≤—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ‚Äú–ø—Ä–∞–≤–∏–ª—å–Ω–æ‚Äù –∏ —Ç–µ–ø–ª–æ.
          </p>

          <div class="btns">
            <button class="primary" onclick="goLetter1()">–ù–∞–∂–º–∏ –Ω–∞ –º–µ–Ω—è üíó</button>
          </div>
        </section>

        <!-- Slide 4 (letter page 1) -->
        <section class="slide hidden" id="s4">
          <div class="kicker">üíå –ü–∏—Å—å–º–æ</div>
          <h1>–õ–∞—Ç–∏—Ñ–∞‚Ä¶</h1>
          <p class="sub" style="max-width:64ch">
            –¢—ã ‚Äî —á–µ–ª–æ–≤–µ–∫, —Ä—è–¥–æ–º —Å –∫–æ—Ç–æ—Ä—ã–º —Ö–æ—á–µ—Ç—Å—è –±—ã—Ç—å –ª—É—á—à–µ: –º—è–≥—á–µ, —á–µ—Å—Ç–Ω–µ–µ, –∑–∞–±–æ—Ç–ª–∏–≤–µ–µ.
            –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–≤–æ–π –≤–∑–≥–ª—è–¥, —Ç–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä, —Ç–≤–æ—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Äî –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã –º–æ–ª—á–∏—à—å.
            <br><br>
            –Ø —Ö–æ—á—É –¥–µ—Ä–∂–∞—Ç—å —Ç–µ–±—è –∑–∞ —Ä—É–∫—É –∏ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–µ–ø–ª–æ—Ç—É
            –•–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –∑–Ω–∞–ª–∞,—á—Ç–æ —Ç—ã –Ω–µ –æ–¥–Ω–∞, —è –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º.
          </p>

          <div class="divider"></div>

          <div class="postcards">
            <div class="pc">
              <p class="pcTitle">üß∏ –û–±–µ—â–∞—é</p>
              <p class="pcText">–±–µ—Ä–µ—á—å —Ç–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∏ —É–≤–∞–∂–∞—Ç—å —Ç–µ–±—è –≤—Å–µ–≥–¥–∞.</p>
            </div>
            <div class="pc">
              <p class="pcTitle">ü§ç –û–±–µ—â–∞—é</p>
              <p class="pcText">—Å–ª—É—à–∞—Ç—å —Ç–µ–±—è –∏ –ø–æ–Ω–∏–º–∞—Ç—å, –∞ –Ω–µ —Å–ø–æ—Ä–∏—Ç—å —Ä–∞–¥–∏ —Å–ø–æ—Ä–∞.</p>
            </div>
          </div>

          <div class="btns">
            <button class="primary" onclick="goLetter2()">–ï—â—ë —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ ‚ú®</button>
          </div>
        </section>

        <!-- Slide 5 (letter page 2) -->
        <section class="slide hidden" id="s5">
          <div class="kicker">üíå –ü–∏—Å—å–º–æ </div>
          <h1>–°–ø–∞—Å–∏–±–æ‚Ä¶</h1>
          <p class="sub" style="max-width:64ch">
            –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏. –°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é –¥–æ–±—Ä–æ—Ç—É, –∫—Ä–∞—Å–æ—Ç—É –∏ —Ç–æ,
            –∫–∞–∫ —Ç—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å –º–∏—Ä —Å–≤–µ—Ç–ª–µ–µ.
            <br><br>
            –Ø —Ö–æ—á—É, —á—Ç–æ–±—ã —É –Ω–∞—Å –±—ã–ª–æ –±–æ–ª—å—à–µ —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –¥–Ω–µ–π, –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç—Ä–∞–¥–∏—Ü–∏–π –∏ –±–æ–ª—å—à–∏—Ö –ø–ª–∞–Ω–æ–≤.
            –ò —á—Ç–æ–±—ã –≤ –∫–∞–∂–¥–æ–º –∏–∑ –Ω–∏—Ö –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ–µ: <b>‚Äú–º—ã‚Äù</b> üíó
            <br><br>
            <b>‚Äî –ë–µ–∫—Ç—É—Ä,—Ç–≤–æ–π –ª—é–±–∏–º—ã–π</b>
          </p>

          <div class="btns">
            <button class="primary" onclick="goFinal()">–§–∏–Ω–∞–ª üé∂</button>
          </div>
        </section>

        <!-- Slide 6 (song) -->
        <section class="slide hidden" id="s6">
          <div class="kicker">üé∂ –ù–∞—à–∞ –ø–µ—Å–Ω—è</div>
          <h1>–° 14 —Ñ–µ–≤—Ä–∞–ª—è, –õ–∞—Ç–∏—Ñ–∞ ‚ù§Ô∏è</h1>
          <p class="sub">
            –ù–∞–∂–º–∏ ‚Äî –≤–∫–ª—é—á–∏ –ø–µ—Å–Ω—é. –ê –ø–æ—Ç–æ–º –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ: ‚Äú–Ø —Å–æ–≥–ª–∞—Å–Ω–∞‚Äù üòåüíó
          </p>

          <div class="postcards">
            <div class="pc">
              <p class="pcTitle">üåπ –°–µ–≥–æ–¥–Ω—è</p>
              <p class="pcText">—Ö–æ—á—É –ø–æ–¥–∞—Ä–∏—Ç—å —Ç–µ–±–µ —É–ª—ã–±–∫—É –∏ —á—É–≤—Å—Ç–≤–æ ‚Äú—è –Ω—É–∂–Ω–∞‚Äù.</p>
            </div>
            <div class="pc">
              <p class="pcTitle">‚ôæÔ∏è –í—Å–µ–≥–¥–∞</p>
              <p class="pcText">–±—É–¥—É —Å—Ç–∞—Ä–∞—Ç—å—Å—è –ª—é–±–∏—Ç—å —Ç–µ–±—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ: –±–µ—Ä–µ–∂–Ω–æ –∏ —á–µ—Å—Ç–Ω–æ.</p>
            </div>
          </div>

          <div class="btns">
            <button class="primary" onclick="openSong()">–í–∫–ª—é—á–∏—Ç—å –ø–µ—Å–Ω—é üé∂</button>
            <button class="trick" style="position:static; background:rgba(255,255,255,.92)" onclick="restart()">–°–Ω–∞—á–∞–ª–∞</button>
          </div>

          <div class="small">üíó</div>
        </section>

      </div>
    </section>
  </main>

<script>
  // ===== scenes
  const slides = ["s1","s2","s3","s4","s5","s6"].map(id => document.getElementById(id));
  function show(id){
    slides.forEach(s => s.classList.add("hidden"));
    const el = document.getElementById(id);
    el.classList.remove("hidden");
    el.classList.remove("pop");
    void el.offsetWidth;
    el.classList.add("pop");
    window.location.hash = id;
  }
  function goYes(){ show("s2"); burstHearts(18); }
  function goPhoto(){ show("s3"); burstHearts(22); }
  function goLetter1(){ show("s4"); burstHearts(18); }
  function goLetter2(){ show("s5"); burstHearts(18); }
  function goFinal(){ show("s6"); burstHearts(28); }
  function restart(){ show("s1"); }

  // ===== song (pre-set)
  const SONG_URL = "https://youtu.be/nflpV9T-WHE?si=A515xR5edV2Uh19p";
  function openSong(){ window.open(SONG_URL, "_blank"); }

  // ===== No button trick: first click -> toast, after that it runs away
  let noCount = 0;
  const noBtn = document.getElementById("noBtn");
  const trickWrap = document.getElementById("trickWrap");
  const btnArea = document.getElementById("btnArea");
  const toast = document.getElementById("toast");

  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 900);
  }

  function moveNoButton(){
    trickWrap.style.position = "absolute";
    trickWrap.style.left = "50%";
    trickWrap.style.top = "50%";
    trickWrap.style.transform = "translate(-50%, -50%)";

    const area = btnArea.getBoundingClientRect();
    const wrap = trickWrap.getBoundingClientRect();

    const pad = 8;
    const maxX = Math.max(pad, area.width - wrap.width - pad);
    const maxY = Math.max(pad, area.height - wrap.height - pad);

    const x = pad + Math.random() * maxX;
    const y = pad + Math.random() * maxY;

    trickWrap.style.left = x + "px";
    trickWrap.style.top = y + "px";
    trickWrap.style.transform = "translate(0,0)";
  }

  function noClick(){
    noCount++;
    burstHearts(6);

    if(noCount === 1){
      showToast("–ü–æ–¥—É–º–∞–π –µ—â—ë —Ä–∞–∑ üòè");
      noBtn.textContent = "–ù–µ—Ç üôà";
      moveNoButton();
    }else{
      showToast("–ù–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞–∂–∞—Ç—å üòÖ");
      moveNoButton();
    }
  }

  function runAwayIfNeeded(){
    if(noCount >= 1){
      moveNoButton();
      showToast("–•–∏—Ö–∏ üòÑ");
    }
  }
  noBtn.addEventListener("mouseenter", runAwayIfNeeded);
  noBtn.addEventListener("touchstart", ()=>{ runAwayIfNeeded(); }, {passive:true});

  // ===== hearts
  const heartsWrap = document.getElementById("hearts");
  function spawnHeart(){
    const h = document.createElement("div");
    h.className = "heart";
    const x = Math.random()*100;
    const size = 10 + Math.random()*14;
    const duration = 6 + Math.random()*6;
    const delay = Math.random()*1.2;

    h.style.left = x + "vw";
    h.style.width = size + "px";
    h.style.height = size + "px";
    h.style.opacity = (0.55 + Math.random()*0.4).toFixed(2);
    h.style.animationDuration = duration + "s";
    h.style.animationDelay = delay + "s";

    const t = Math.random();
    if(t < .33) h.style.background = "rgba(255,255,255,.92)";
    else if(t < .66) h.style.background = "rgba(255,214,230,.92)";
    else h.style.background = "rgba(255,245,250,.92)";

    heartsWrap.appendChild(h);
    setTimeout(()=>h.remove(), (duration+delay)*1000 + 200);
  }
  function burstHearts(n=12){ for(let i=0;i<n;i++) setTimeout(spawnHeart, i*45); }
  setInterval(()=>spawnHeart(), 420);

  // ===== sparkles
  const sparkles = document.getElementById("sparkles");
  function addSpark(){
    const s = document.createElement("div");
    s.className = "spark";
    s.style.left = (Math.random()*100) + "vw";
    s.style.top = (Math.random()*100) + "vh";
    s.style.animationDuration = (1.8 + Math.random()*2.8) + "s";
    s.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
    sparkles.appendChild(s);
    setTimeout(()=>s.remove(), 5000);
  }
  for(let i=0;i<18;i++) addSpark();
  setInterval(addSpark, 260);

  // Restore scene from hash
  const hash = (location.hash || "").replace("#","");
  if(["s1","s2","s3","s4","s5","s6"].includes(hash)) show(hash);
  else show("s1");
</script>
</body>
</html>
